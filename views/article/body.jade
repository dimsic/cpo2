// Created by qlba on 27.10.2016.

extends ../generic/generic

mixin articleSection(sectId, sectName, sectContent)
    section.ArticleBodyBlock(id= "" + sectId)
        h1= sectName
        hr
        != mkdn(sectContent)

mixin rightTableRow(k, v)
    tr
        td.RightTableCell= k
        td.RightTableCell= v

block head_data
    - var head = {};
    - head.styles = ['/stylesheets/article/main.css'];
    - head.title = !error ? article.name + ' - WikiEngine' : 'WikiEngine';

block body

        nav.Container#leftNavPanel
            h3.LinkGroup Routes (dev)
            hr
            a(href="/article").LeftPanelNavLink /article
            a(href="/article-random").LeftPanelNavLink /article-random
            a(href="/_engine/stash/markdown").LeftPanelNavLink /engine/stash/markdown
            a(href="/_engine/stash/markdown-commit").LeftPanelNavLink /engine/stash/markdown-commit

            h3.LinkGroup Generic
            hr
            a(href="/").LeftPanelNavLink Main page
            a(href="/article-random").LeftPanelNavLink Random article

            if (!error)
                h3.LinkGroup Article specific links
                hr
                each val in article.links
                    a.LeftPanelNavLink(href=val.url)= val.label

        section.Container#articleBox
            if (!error)
                header.Container#articleHead
                    h1= article.name
                    hr
                    section.Container#articleHeadContent
                        section.Container#articleHeadLeft
                            section.Container#articleBriefBox
                                != mkdn(article.left.articleBrief)

                            section.Container#articleContentsListBox
                                section#articleContentsList
                                    p(align="center") Contents
                                    table
                                        tbody
                                            each val in article.content
                                                tr
                                                    td.ContentsListSectionId
                                                        a(href="#" + val.sectId)= val.sectId + 1
                                                    td.ContentsListSectionName
                                                        a(href="#" + val.sectId)= val.sectName

                        section.Container#articleHeadRight
                            h3(align="center")= article.right.category
                            section.Container#articleRightTableBox
                                p#imageParagraph(align="center")
                                    img#rightTableImage(src=article.right.imageUrl)
                                table
                                    tbody
                                        each val in article.right.tableContent
                                            +rightTableRow(val.k, val.v)

                section.Container#articleBody
                    each val in article.content
                        +articleSection(val.sectId, val.sectName, val.sectContent)
            else
                h1= error
